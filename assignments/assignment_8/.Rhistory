yc_cols <-
sec1 %>%
select(starts_with("first_assignment"),
starts_with("your_choice_")) %>%
select(-contains("final\\|midterm")) %>%
names
yc_cols
yc_cols <-
sec1 %>%
select(starts_with("first_assignment"),
starts_with("your_choice_")) %>%
select(-contains("_final_")) %>%
select(-contains("_midterm_")) %>%
names
yc_cols
sec1$your_choice_midterm_7988609
yc_max <-
sec1 %>%
mutate(yc_max = case_when(your_choice_midterm_7988609 >= 50 ~ 50,
TRUE ~ your_choice_midterm_7988609)))
mutate(yc_max = case_when(your_choice_midterm_7988609 >= 50 ~ 50,
TRUE ~ your_choice_midterm_7988609))
sec1 %>%
mutate(yc_max = case_when(your_choice_midterm_7988609 >= 50 ~ 50,
TRUE ~ your_choice_midterm_7988609))
yc_max <-
sec1 %>%
mutate(mt_total = case_when(your_choice_midterm_7988609 >= 50 ~ 50,
TRUE ~ your_choice_midterm_7988609)) %>%
mutate(yc_max = 100 + mt_total) %>%
pluck('yc_max')
yc_max
sec1$yc_max <- yc_max
sec1 %>%
select(all_of(yc_cols))
sec1 %>%
select(all_of(yc_cols)) %>%
rowSums(na.rm=TRUE)
yc_cols
sec1$yc_total <-
sec1 %>%
select(all_of(yc_cols)) %>%
rowSums(na.rm=TRUE)
sec1 %>%
mutate(your_choice_final_7988605 = case_when(yc_total > yc_max ~ yc_max,
TRUE ~ yc_total))
sec1 <-
sec1 %>%
mutate(your_choice_final_7988605 = case_when(yc_total > yc_max ~ yc_max,
TRUE ~ yc_total))
write_csv(sec1,"~/Downloads/sec1_yctotal.csv")
# add up all yc points
names(sec2)
yc_cols <-
sec2 %>%
select(starts_with("first_assignment"),
starts_with("your_choice_")) %>%
select(-contains("_final_")) %>%
select(-contains("_midterm_")) %>%
names
sec2$yc_total <-
sec2 %>%
select(all_of(yc_cols)) %>%
rowSums(na.rm=TRUE)
yc_max <-
sec2 %>%
mutate(mt_total = case_when(your_choice_midterm_7989022 >= 50 ~ 50,
TRUE ~ your_choice_midterm_7989022)) %>%
mutate(yc_max = 100 + mt_total) %>%
pluck('yc_max')
sec2$yc_max <- yc_max
sec2 <-
sec2 %>%
mutate(your_choice_final_7988605 = case_when(yc_total > yc_max ~ yc_max,
TRUE ~ yc_total))
sec2 <-
sec2 %>%
mutate(your_choice_midterm_7989022 = case_when(yc_total > yc_max ~ yc_max,
TRUE ~ yc_total))
write_csv(sec2,"~/Downloads/sec2_yctotal.csv")
sec2 <-
sec2 %>%
mutate(your_choice_final_7989018 = case_when(yc_total > yc_max ~ yc_max,
TRUE ~ yc_total))
write_csv(sec2,"~/Downloads/sec2_yctotal.csv")
sec1$your_choice_final_7988605
sec2$your_choice_final_7989018
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
ggplot(
aes(x=1:nrow(.))
)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
ggplot(
aes(x=1:nrow(.),
y=your_choice,
color=section,
fill=section) +
geom_col()
) +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
ggplot(aes(x=1:nrow(.),
y=your_choice,
color=section,
fill=section)) +
geom_col() +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
arrange(section,desc(your_choice)) %>%
ggplot(aes(x=1:nrow(.),
y=your_choice,
color=section,
fill=section)) +
geom_col() +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
arrange(section,desc(your_choice)) %>%
ggplot(aes(x=1:nrow(.),
y=your_choice,
color=section,
fill=section)) +
geom_point(size=.5) +
geom_col(width = .1) +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
data.frame(your_choice = sec1$your_choice_final_7988605, section = "001") %>%
full_join(
data.frame(your_choice = sec2$your_choice_final_7989018, section = "X03")
) %>%
arrange(section,desc(your_choice)) %>%
ggplot(aes(x=1:nrow(.),
y=your_choice,
color=section,
fill=section)) +
geom_point(size=.5) +
geom_col(width = .1) +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8) +
labs(x="Student",y="Total YC Points Earned",color="Course section",fill='Course section')
sec1 %>% names
sec1 %>%
select(ends_with("_final_points"))
sec1 %>%
select(starts_with("your_choice_final_"),ends_with("_final_points"))
sec1 %>%
select(starts_with("your_choice_final_"),ends_with("_final_points")) %>%
rowSums(na.rm = TRUE)
sec1 %>%
select(starts_with("your_choice_final_"),ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
sec1 %>% names
sec1 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
full_join(
)
)
current_grades <-
data.frame(section="001",
current=sec1 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>%
full_join(
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
)
)
current_grades
current_grades %>%
arrange(section,desc(current))
current_grades <-
data.frame(section="001",
current=sec1 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
)%>% mutate(id=1:nrow(.))%>%
full_join(
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>% mutate(id=1:nrow(.))
)
current_grades %>%
arrange(section,desc(current)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(dat)/2),y=600,label="A") +
annotate('text',x = (nrow(dat)/2),y=540,label="B") +
annotate('text',x = (nrow(dat)/2),y=460,label="C") +
annotate('text',x = (nrow(dat)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
current_grades %>%
arrange(section,desc(current)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(.)/2),y=600,label="A") +
annotate('text',x = (nrow(.)/2),y=540,label="B") +
annotate('text',x = (nrow(.)/2),y=460,label="C") +
annotate('text',x = (nrow(.)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
current_grades %>%
arrange(section,desc(current)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(current_grades)/2),y=600,label="A") +
annotate('text',x = (nrow(current_grades)/2),y=540,label="B") +
annotate('text',x = (nrow(current_grades)/2),y=460,label="C") +
annotate('text',x = (nrow(current_grades)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8)
current_grades %>%
arrange(section,desc(current)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(current_grades)/2),y=600,label="A") +
annotate('text',x = (nrow(current_grades)/2),y=540,label="B") +
annotate('text',x = (nrow(current_grades)/2),y=460,label="C") +
annotate('text',x = (nrow(current_grades)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8) +
facet_wrap(~section)
current_grades %>%
arrange(section,desc(current)) %>% View
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>% mutate(id=1:nrow(.)) %>% View
sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points"))
sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric))
sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>% View
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
select(-ends_with("88605")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>% mutate(id=1:nrow(.)) %>% View
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
select(-ends_with("88605")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>% mutate(id=1:nrow(.))
current_grades <-
data.frame(section="001",
current=sec1 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
)%>% mutate(id=1:nrow(.))%>%
full_join(
data.frame(section="X03",
current=sec2 %>%
select(starts_with("your_choice_final_"),
starts_with("pre_test_participation_points_"),
ends_with("_final_points")) %>%
select(-ends_with("88605")) %>%
mutate(across(everything(),as.numeric)) %>%
rowSums(na.rm = TRUE)
) %>% mutate(id=1:nrow(.))
)
current_grades %>%
arrange(section,desc(current)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(current_grades)/2),y=600,label="A") +
annotate('text',x = (nrow(current_grades)/2),y=540,label="B") +
annotate('text',x = (nrow(current_grades)/2),y=460,label="C") +
annotate('text',x = (nrow(current_grades)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8) +
facet_wrap(~section)
current_grades %>%
arrange(section,desc(current)) %>%
mutate(id=1:nrow(.)) %>%
ggplot(aes(x=id,y=current,color=section,fill=section)) +
coord_cartesian(ylim=c(0,700)) +
geom_point(size=.5) +
geom_col(width = .1) +
geom_hline(yintercept = 600,linetype=2,color="green") +
geom_hline(yintercept = 540,linetype=2,color="blue") +
geom_hline(yintercept = 460,linetype=2,color="orange") +
geom_hline(yintercept = 380,linetype=2,color="red") +
annotate('text',x = (nrow(current_grades)/2),y=600,label="A") +
annotate('text',x = (nrow(current_grades)/2),y=540,label="B") +
annotate('text',x = (nrow(current_grades)/2),y=460,label="C") +
annotate('text',x = (nrow(current_grades)/2),y=380,label="D") +
labs(x="Student",y="Current point total",color="Section",fill="Section",title = "Progress toward final grade") +
scale_color_viridis_d(option='turbo',end = .8) +
scale_fill_viridis_d(option='turbo',end=.8) +
facet_wrap(~section)
list.dirs("~/R/x86_64-pc-linux-gnu-library/4.4/")
list.dirs("~/R/x86_64-pc-linux-gnu-library/4.4",recursive = FALSE)
list.dirs("~/R/x86_64-pc-linux-gnu-library/4.4",recursive = FALSE) %>%
sub("/home/gzahn/R/x86_64-pc-linux-gnu-library/4.4/","",.)
sub("/home/gzahn/R/x86_64-pc-linux-gnu-library/4.4/","",list.dirs("~/R/x86_64-pc-linux-gnu-library/4.4",recursive = FALSE))
packages <-
sub("/home/gzahn/R/x86_64-pc-linux-gnu-library/4.4/","",list.dirs("~/R/x86_64-pc-linux-gnu-library/4.4",recursive = FALSE))
.libPaths()
library(tidyverse)
library(tidyverse)
library(vegan)
library(MCMCpack)  # for Dirichlet distribution
library(easystats)
library(tidyverse)
read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv")
dat <- read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv")
View(dat)
dat <- dat[-1,]
View(dat)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
sample(dat$Student,1)
View(dat)
dat <- dat[-13,]
sample(dat$Student,1)
View(dat)
dat <- read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv")
dat
dat <- read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv") %>%
filter(Raffle)
dat <- read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv") %>%
filter(Raffle)
dat
sample(dat$Student,1)
dat <- read_csv("~/Downloads/2025-04-24T1255_Grades-BIOL_3100_002___2025_Spring_-_Full_Term.csv") %>%
filter(Raffle)
View(dat)
raffle_winner <- sample(dat$Student,1)
raffle_winner
## set up custom PATH if needed
fqdump <- system("which fasterq-dump",intern = TRUE)
if(length(fqdump)==0){
stop("Make sure fasterq-dump is installed (sra-toolkit) and in your $PATH before running this script")
}
## load packages ####
library(dplyr)
library(magrittr)
## load metadata ####
dat <- read_csv("./data/metadata/sporosphere_metadata.csv")
library(readr)
## load metadata ####
dat <- read_csv("./data/metadata/sporosphere_metadata.csv")
# Tell R which working directory it should be in (change if necessary)
setwd("~/Desktop/GIT_REPOSITORIES/BIOCOMPUTING/assignments/assignment_8")
## set up custom PATH if needed
fqdump <- system("which fasterq-dump",intern = TRUE)
## load packages ####
library(dplyr)
library(magrittr)
library(readr)
## load metadata ####
dat <- read_csv("./data/metadata/sporosphere_metadata.csv")
## Download Silva taxonomy databases ####
download.file(url = "https://zenodo.org/records/14169026/files/silva_nr99_v138.2_toGenus_trainset.fa.gz",
destfile = "./taxonomy/silva_nr99_v138.2_toGenus_trainset.fa.gz"
)
# set longer timeout than default of 60s
options(timeout=1000)
# packages
library(readr)
library(tidyr)
library(dplyr)
library(dada2)
library(decontam)
# functions
source("./R/functions.R")
# Tell R which working directory it should be in (change if necessary)
setwd("~/BIOCOMPUTING/assignments/assignment_8")
# Tell R which working directory it should be in (change if necessary)
setwd("~/Desktop/GIT_REPOSITORIES/BIOCOMPUTING/assignments/assignment_8")
# functions
source("./Rscripts/functions.R")
# metadata
meta <- read_csv("./data/metadata/sporosphere_metadata.csv")
# list of sequencing runs
# just one run for this project...
meta$run_id <- "run1"
all_runs <- unique(meta$run_id)
all_runs
glimspe(meta)
glimpse(meta)
